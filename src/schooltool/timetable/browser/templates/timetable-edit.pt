<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">
      Scheduling for <span i18n:name="section"
                           tal:define="section context/__parent__/__parent__"
                           tal:replace="section/label" />
  </title>
</head>
<body>

<h1 metal:fill-slot="content-header" i18n:translate="">
  Scheduling for <span i18n:name="section"
                       tal:define="section context/__parent__/__parent__"
                       tal:replace="section/label" />
</h1>

<metal:block metal:fill-slot="body">

<p tal:condition="not:view/has_timetables"
   i18n:translate="">There are no timetable schemas defined.</p>

<tal:if tal:condition="view/has_timetables">

  <div tal:define="term view/getTerm;
		   ttschemas view/ttschemas/values">
    <div i18n:translate="">For term:
      <strong i18n:name="term_title" tal:content="term/title" />
      (from
        <tal:block i18n:name="starts" tal:content="term/first/@@mediumDate"/>
       to
        <tal:block i18n:name="ends" tal:content="term/last/@@mediumDate"/>)
    </div>

    <div i18n:translate="">Using timetable:
    <strong i18n:name="schema_titles"
            tal:repeat="ttschema ttschemas/sortby:title"
            tal:content="ttschema/title" />
    </div>
  </div>


  <div class="status" tal:condition="view/status">
    <ul class="errors"
        tal:condition="view/widgets/errors"
        metal:define-macro="form-errors">
      <li tal:repeat="error view/widgets/errors">
        <tal:block condition="error/widget">
          <span tal:replace="error/widget/label" />:
        </tal:block>
        <span tal:replace="structure error/render">Error Type</span>
      </li>
    </ul>
  </div>

<form action="." method="post" enctype="multipart/form-data"
      metal:define-macro="form"
      tal:attributes="method view/method;
                      enctype view/enctype;
                      acceptCharset view/acceptCharset;
                      accept view/accept;
                      action view/action;
                      name view/name;
                      id view/id">

  <table class="timetable">
    <tr>
      <tal:block repeat="day view/getDays">
        <th class="day" tal:content="day/title">Day N</th>
      </tal:block>
    </tr>
    <tr>
      <tal:block repeat="day view/getDays">
        <td >
          <ul>
            <tal:block tal:repeat="period day/periods">
              <li>
                <input class="activity" type="checkbox"
                       tal:attributes="checked period/selected;
                                       id string:${day/title}.${period/title};
                                       name string:${day/title}.${period/title};
                                       value string:${day/title}.${period/title}" />
                <label class="period"
                       tal:attributes="for string:${day/title}.${period/title}"
                       tal:content="period/title">
                  Period N
                </label>
              </li>
            </tal:block>
          </ul>
        </td>
      </tal:block>
    </tr>
    <tr>
      <td tal:attributes="colspan python:len(view.getDays())">


        <span i18n:translate="">Apply from:</span>

          <tal:block define="widget python:view.widgets['first']">
            <metal:block define-macro="render-widget">
            <div class="row" tal:attributes="id string:${widget/id}-row">
              <div class="widget" tal:content="structure widget/render">
              </div>
              <div class="error" tal:condition="widget/error">
                <span tal:replace="structure widget/error/render">error</span>
              </div>
            </div>
            </metal:block>
          </tal:block>

        <span i18n:translate="">Apply until:</span>

          <tal:block define="widget python:view.widgets['last']">
            <div metal:use-macro="template/macros/render-widget">
            </div>
          </tal:block>

        <span i18n:translate="">Treat consecutive selected periods as a single meeting:</span>

          <tal:block define="widget python:view.widgets['consecutive_periods_as_one']">
            <div metal:use-macro="template/macros/render-widget">
            </div>
          </tal:block>

      </td>
    </tr>
  </table>

  <div metal:use-macro="macro:form-buttons">
  </div>


</form>

</tal:if>

</metal:block>
</body>
</html>
