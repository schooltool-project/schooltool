<tal:defs define="status view/update" />
<html metal:use-macro="view/@@schooltool_macros/calendar/page" 
      i18n:domain="schooltool">

<metal:block metal:fill-slot="calendar-body">
  <table id="calendar-view-year"
         cellpadding="0" cellspacing="0"
         tal:define="quarters python:view.getYear(view.cursor)">

      <tr tal:repeat="quarter quarters">
        <td class="month" valign="top"
            tal:repeat="month quarter">
          <table class="month" cellpadding="0" cellspacing="0">
            <tr>
              <th colspan="7" class="month-title"
                  tal:define="mtit python:view.monthTitle(month[1][0].date)">
                <a tal:content="mtit"
                   tal:attributes="href python:view.calURL('monthly',
                                   month[1][0].date);
                                   title mtit"/>
              </th>
            </tr>
            <tr>
              <th class="month-weekday"
                  width="14%"
                  tal:repeat="weekday python:month[0]"
                  tal:content="python:view.shortDayOfWeek(weekday.date)" />
            </tr>
            <tr tal:repeat="week month">
              <td tal:replace="structure
                  python:view.renderRow(week, month[1][0].date.month)" />
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <div style="right: 0px; float: right; border: thin solid gray; position: fixed; right: 10px; top: 50%">
        <div style="text-align: center; text-decoration: underline; font-weight: bold"> Legend </div>
            <div tal:repeat="term python: view.terms.keys()">
                   <div style="margin: 2px; padding: 2px"
                        tal:content="term/title|nothing" 
                         tal:attributes="class python:'term'+str(view.terms[term])">
                    Term
                    </div>
            </div>
    </div>
  </metal:block>
</html>
