<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">Upload CSV data</title>
</head>
<body>
<h1 metal:fill-slot="h1" i18n:translate="">Upload CSV data</h1>
<metal:block metal:fill-slot="content">

  <form method="POST" enctype="multipart/form-data"
        tal:attributes="action request/path">
    <div class="error" tal:condition="view/error" tal:content="view/error" />
    <div class="info" tal:condition="view/success"
         i18n:translate="">Data imported successfully.</div>

    <div class="row">
      <label for="groups.csv" i18n:translate="">groups.csv</label>
      <input id="groups.csv" type="file" name="groups.csv" />
    </div>

    <div class="row">
      <label for="teachers.csv" i18n:translate="">teachers.csv</label>
      <input id="teachers.csv" type="file" name="teachers.csv" />
    </div>

    <div class="row">
      <label for="pupils.csv" i18n:translate="">pupils.csv</label>
      <input id="pupils.csv" type="file" name="pupils.csv" />
    </div>

    <div class="row">
      <label for="resources.csv" i18n:translate="">resources.csv</label>
      <input id="resources.csv" type="file" name="resources.csv" />
    </div>

    <div class="row" tal:replace="structure view/charset_widget">
      [Charset]
    </div>
    <div class="row" tal:replace="structure view/other_charset_widget">
      [Charset if Other was selected]
    </div>

  <div class="buttons">
    <input class="button" type="submit" value="Submit"
           i18n:attributes="value" />
  </div>

  </form>

  <p style="clear:both" i18n:translate="">
    Note that the import may take a while.  Please be patient.
  </p>

  <hr />

  <h2 i18n:translate="">Format of the files</h2>

    <p i18n:translate="">
      You can create these files in a spreadsheet and export them in the comma
      separated value format described below.
    </p>

    <p style="clear:both" i18n:translate="">
      <strong>groups.csv</strong> contains lines of comma-separated values
      with the following columns:</p>
    <ul>

      <li i18n:translate=""><strong>name</strong> -- The name of this group.
             It is used for constructing object URIs
             and cannot be changed.  A group with the name of x will be
             accessible as /groups/x on the server.  Names should not contain
             spaces.</li>
      <li i18n:translate=""><strong>title</strong> -- A human-readable title of
             the group.</li>
      <li i18n:translate=""><strong>parents</strong> -- A space separated list
             of names of the groups this group is a
             member in.  The list can be empty.</li>
      <li i18n:translate=""><strong>facets</strong>  -- A space separated list
             of facet factories to add to this group.
             The list can be empty.</li>

    </ul>

    <p i18n:translate="">The following two groups are always created and should
             not be defined explicitly:</p>

    <ul>
      <li i18n:translate="">Pupils group (/groups/pupils).</li>
      <li i18n:translate="">Teachers group (/groups/teachers) with
             teacher_group facet added to it.</li>
    </ul>

    <p i18n:translate="">Sample groups.cvs:</p>

    <tal:comment condition="nothing">
      <!-- Cannot use <pre> here, because i18n:translate replaces line breaks
           with simple spaces. -->
    </tal:comment>
    <code i18n:translate="">"math","Mathematics Department","root",""<br />
             "year1","Year 1","root",""<br />
             "math1","Mathematics 1","math year1","subject_group"</code>


    <p i18n:translate=""><strong>pupils.csv</strong> contains lines of
             comma-separated values with the following columns:</p>

    <ul>
      <li i18n:translate=""><strong>title</strong> -- The full name of a pupil.
             </li>
      <li i18n:translate=""><strong>groups</strong> -- A space-separated list
             of groups this pupil is a member in.</li>
      <li i18n:translate=""><strong>birthday</strong> -- Date of birth
             (YYYY-MM-DD).</li>
      <li i18n:translate=""><strong>comment</strong>  -- A comment
             (a free form string).</li>
    </ul>

    <p i18n:translate="">Pupils are automatically added to the pupils group
             (/groups/pupils).</p>

    <p i18n:translate="">Sample pupils.csv:</p>

    <code i18n:translate="">"James Cox","year1 math1 ling1",
             "1994-03-10",""<br />
             "Tom Hall","year1 biol1 math1","1994-07-20",""</code>

    <p i18n:translate=""><strong>teachers.csv</strong>
             contains lines of comma-separated values with the
             following columns:</p>

    <ul>
      <li i18n:translate=""><strong>title</strong> -- The full name of
             a teacher.</li>
      <li i18n:translate=""><strong>groups</strong> -- A space-separated list
             of groups this teacher teaches to.</li>
      <li i18n:translate=""><strong>birthday</strong> -- Date of birth in
             ISO 8601 format (YYYY-MM-DD).</li>
      <li i18n:translate=""><strong>comment</strong> -- A comment
            (a free form string).</li>
    </ul>

    <p i18n:translate="">Teachers are automatically added to the teachers group
             (/groups/teachers).</p>

    <p i18n:translate="">Sample teachers.csv:</p>

   <code i18n:translate="">"Nicola Smith","ling3","1952-12-06",""<br />
             "Jeff Cox","biol3","1967-06-13",""</code>


   <p i18n:translate=""><strong>resources.csv</strong> contains lines of
             comma-separated values with the following columns:</p>

   <ul>
     <li i18n:translate=""><strong>title</strong> -- The human readable name of
             the resource.</li>
     <li i18n:translate=""><strong>groups</strong> -- A space-separated list of
             groups that this resource belongs to.</li>
   </ul>

   <p i18n:translate="">Sample resources.csv:</p>

    <code i18n:translate="">"Hall", "locations"<br />
            "Stadium", "locations"<br />
            "Projector 1", ""<br />
            "Projector 2", ""<br />
            "Room 1", "locations"<br />
            "Room 2", "locations miscgroup"</code>

</metal:block>
</body>
</html>
