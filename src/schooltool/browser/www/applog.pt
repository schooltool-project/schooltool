<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">Application log</title>
</head>
<body>

<h1 metal:fill-slot="h1" i18n:translate="">Application log</h1>

<metal:block metal:fill-slot="content">

  <div class="error" tal:condition="view/error" tal:content="view/error" />

<tal:block condition="not:view/error">
  <form method="GET" tal:attributes="action request/path">

    <div class="row">
      <label for="page" i18n:translate="">Page</label>
      <input id="page" name="page" type="text"
             tal:attributes="value view/query/page" />
      <tal:span i18n:translate="">
        (of <span i18n:name="total" tal:replace="view/query/total" />)
      </tal:span>
      <input class="button" type="submit" value="Go" i18n:attributes="value" />
    </div>
    <div class="row">
      <input type="hidden" name="prev_filter"
             tal:attributes="value view/filter_str">
      <label for="filter" i18n:translate="">Substring</label>
      <input id="filter" name="filter" type="text"
             tal:attributes="value view/filter_str" />
      <input class="button" type="submit" value="Filter"
             i18n:attributes="value" />
    </div>

    <pre tal:content="python:'\n'.join(view.query.result)">
      Log
      contents
      here
    </pre>

    <p>
    <!-- XXX This way of navigation is clumsy and impractical -->
    <a tal:attributes="href python:view.pageURL(1)"
       class="action" i18n:translate="">First page</a>
    <a tal:condition="python:view.query.page > 1"
       tal:attributes="href python:view.pageURL(view.query.page - 1)"
       class="action" i18n:translate=""
       >Previous page</a>
    <a tal:condition="python:view.query.page < view.query.total"
       tal:attributes="href python:view.pageURL(view.query.page + 1)"
       class="action" i18n:translate=""
       >Next page</a>
    <a tal:attributes="href python:view.pageURL(-1)"
       class="action" i18n:translate="">Last page</a>
    </p>

  </form>
</tal:block>

</metal:block>
</body>
</html>
