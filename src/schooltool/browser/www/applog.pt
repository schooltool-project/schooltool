<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">Application log</title>
</head>
<body>

<h1 metal:fill-slot="h1" i18n:translate="">Application log</h1>

<metal:block metal:fill-slot="content">

  <div class="error" tal:condition="view/error" tal:content="view/error" />

  <tal:block condition="not:view/error">
  <form method="GET" tal:attributes="action request/path">

    <p>
    <label for="page">Page</label>
    <input id="page" name="page" type="text"
           tal:attributes="value view/query/page">
    (of <span tal:replace="view/query/total" />)
    <br />
    <input type="hidden" name="prev_filter"
           tal:attributes="value view/filter_str">
    <label for="filter">Show lines containing</label>
    <input id="filter" name="filter" type="text"
           tal:attributes="value view/filter_str">

    <br />
    <input type="submit" value="Go" />
    </p>

      <pre tal:content="python:'\n'.join(view.query.result)">
        Log
        contents
        here
      </pre>

    <p>
    <!-- XXX This way of navigation is clumsy and impractical -->
    <a tal:condition="python:view.query.page > 1"
       tal:attributes="href python:view.pageURL(view.query.page - 1)"
       >Previous page</a>
    <a tal:condition="python:view.query.page < view.query.total"
       tal:attributes="href python:view.pageURL(view.query.page + 1)"
       >Next page</a>
    <br />
    <a tal:attributes="href python:view.pageURL(1)">First page</a>
    <a tal:attributes="href python:view.pageURL(-1)">Last page</a>
    </p>

  </form>
  </tal:block>

</metal:block>
</body>
</html>
