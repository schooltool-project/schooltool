<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">
    Upload schooltool timetable as CSV
  </title>
</head>
<!-- TODO: javascript magic to disable the 'other' field when an encoding is
           chosen from the dropdown box -->
<body>
  <h1 metal:fill-slot="h1" i18n:translate="" style="display:none">
    Upload schooltool timetable as CSV
  </h1>
<metal:block metal:fill-slot="content">

  <div class="info" tal:condition="view/success">
    <p tal:repeat="msg view/success" tal:content="msg" />
  </div>
  <div class="error" tal:condition="view/errors"
       tal:repeat="err view/errors" tal:content="err" />

  <form class="standalone" method="POST" enctype="multipart/form-data"
        tal:attributes="action request/path">
    <h3 i18n:translate="">
      Upload schooltool timetable as CSV
    </h3>
    <fieldset>
      <legend i18n:translate="">Files</legend>
      <div class="row">
        <label for="timetable_csv" i18n:translate="">timetable.csv</label>
        <input id="timetable_csv" type="file" name="timetable.csv" />
      </div>

      <div class="row">
        <label for="roster_txt" i18n:translate="">roster.txt</label>
        <input id="roster_txt" type="file" name="roster.txt" />
      </div>

      <div class="row" tal:replace="structure view/charset_widget">
        [Charset]
      </div>
      <div class="row" tal:replace="structure view/other_charset_widget">
        [Charset if Other was selected]
      </div>
    </fieldset>

    <div class="controls">
      <input class="button-ok" type="submit" value="Submit"
             i18n:attributes="value" />
    </div>

  </form>

  <p style="clear:both" i18n:translate="">
    Note that the import may take a while.  Please be patient.
  </p>

  <hr />

  <h2 i18n:translate="">Format of the files</h2>

    <p i18n:translate="">
      You can create these files in a spreadsheet and export them in the comma
      separated value format described below.
    </p>

    <p style="clear:both" i18n:translate="">
      <strong>timetable.csv</strong> contains lines of comma-separated values
      in the following format.</p>
      
    <p style="clear:both" i18n:translate="">
    First row:</p>
    <ul>
    <li i18n:translate="">
    Time period (as you've <a href="/time-periods"
           i18n:translate="">defined</a> in SchoolTool already).
    </li>
    <li i18n:translate="">
    Timetable schema (also, as you've <a href="/ttschemas"
           i18n:translate="">already defined</a>).
    </li>
    </ul>
    
    <p style="clear:both" i18n:translate="">
    Second row: blank
    </p>
    
    <p style="clear:both" i18n:translate="">
    Day tables.  Repeat as necessary, separated by a blank line:
    </p>
    
    <ul>    
    <li i18n:translate="">
    A comma separated list of days in the schema that apply the table.
    </li>
    
    <li i18n:translate="">
    The top row of the table:  a blank column, 
    followed by columns for each period in the day(s).</li>
    
    <li i18n:translate="">
    The first column designnates a location.
    The following columns contain the title of a course and
    the name of a teacher, separated by a pipe "|".  
    The columns correspond to the periods listed in the top row.
    </li>
    </ul>
    
    <p style="clear:both" i18n:translate="">
    Example:
    </p>
    <pre>
"2004-fall","default"
""
"Day 1"
"","A","B"
"Room 1","Mathematics 1 | Nicola Oakley","Mathematics 2 | Heather Hall"
""
"Day 2"
"","C","D"
"Room 2","Mathematics 2 | Heather Hall","Mathematics 1 | Nicola Oakley"
    </pre>

    <p style="clear:both" i18n:translate="">
      <strong>roster.txt</strong> contains plain text rosters in the
      following format.  Each section is separated by a blank line.  
      For each section, provide the following:
      </p>
      
      <ul>
      <li i18n:translate="">
      The title of the course and the name of 
      the relevant teacher, separated by a dash "-".
      </li>
      <li i18n:translate="">
      The title (name) of each student in the class, each on a separate line.
      </li>
      </ul>
    <p style="clear:both" i18n:translate="">
    Example:
    </p>

    <pre>
Mathematics 1 - Nicola Oakley
Courtney Bisset
Geoffrey Smith
James Cox
James Smith
Jeff Clark
John Ford

Mathematics 2 - Heather Hall
Carol Smith
Deb Price
Denise Batchelor
Jeff Cooper
    </pre>

    <p style="clear:both" i18n:translate>
      The data provided in these examples should work with the
      sample school provided with SchoolTool.
    </p>

</metal:block>
</body>
</html>
