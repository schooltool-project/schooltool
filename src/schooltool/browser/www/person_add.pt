<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
  <head>
    <title metal:fill-slot="title" i18n:translate="">Add person</title>
  </head>

  <body>

    <h1 metal:fill-slot="h1" i18n:translate="">Add person</h1>

    <metal:block metal:fill-slot="content"
      tal:define="ward python:request.args.get('ward',[None])[0]">

      <form class="standalone" method="POST" enctype="multipart/form-data"
            tal:attributes="action request/path">
            <h3 i18n:translate="">Person Information</h3>
        <div class="error"
            tal:condition="view/error"
            tal:content="view/error" />
        <fieldset>
            <legend i18n:translate="">Required Information</legend>
        <div class="row" tal:replace="structure view/first_name_widget" />
        <div class="row" tal:replace="structure view/last_name_widget" />
    </fieldset>
    <fieldset>
        <legend i18n:translate="">Optionl Information</legend>
        <div class="row" tal:replace="structure view/username_widget" />
        <div class="row" tal:replace="structure view/password_widget" />
        <div class="row" tal:replace="structure view/confirm_password_widget" />
        <div class="row" tal:replace="structure view/dob_widget" />
        <div class="row" tal:replace="structure view/comment_widget" />
        <div class="row">
          <label for="photo" i18n:translate="">Photo</label>
          <input id="photo" type="file" name="photo" />
        </div>
    </fieldset>
    <fieldset>
        <legend i18n:translate="">Add to groups</legend>
        <div class="row" tal:replace="structure view/groups_widget" />
    </fieldset>


        <tal:if condition="not:ward">
          <div class="controls" tal:condition="view/duplicate_warning">
            <input class="button-ok" type="submit" name="CONFIRM" value="Add anyway"
                i18n:attributes="value" />
            <input class="button-cancel" type="submit" name="CANCEL" value="Cancel"
                i18n:attributes="value" />
          </div>
          <div class="controls" tal:condition="not:view/duplicate_warning">
            <input class="button-ok" type="submit" name="ADD" value="Add"
                i18n:attributes="value" />
          </div>
        </tal:if>
        <tal:if condition="ward">
          <input type="hidden"
            name="ward"
            value=""
            tal:attributes="value ward" />
          <div class="controls" tal:condition="view/duplicate_warning">
            <input class="button-ok" type="submit" name="CONFIRM" value="Add anyway"
                i18n:attributes="value" />
            <input class="button-cancel" type="submit" name="CANCEL" value="Cancel"
                i18n:attributes="value" />
          </div>
          <div class="controls" tal:condition="not:view/duplicate_warning">
            <input class="button-ok" type="submit" name="ADD" value="Add"
                i18n:attributes="value" />
          </div>
        </tal:if>

      </form>

    </metal:block>
  </body>
</html>
