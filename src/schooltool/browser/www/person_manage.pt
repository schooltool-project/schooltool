<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
  <head>
    <title metal:fill-slot="title"
        i18n:translate="">Manage Person Settings</title>
  </head>
  <body>
    <h1 metal:fill-slot="h1" i18n:translate="">
      Manage Person Informatoin
    </h1>

    <metal:block metal:fill-slot="content">

      <form method="POST" enctype="multipart/form-data"
          tal:attributes="action request/path">

        <div class="error" tal:condition="view/error"
            tal:content="view/error" />

        <div class="row" tal:replace="structure view/newlabel_widget"/>
        <div class="row" tal:replace="structure view/newfield_widget"/>

        <input class="button" type="submit" name="ADDFIELD"
            value="Add Field" i18n:attributes="value" />

      </form>

      <form method="POST" enctype="multipart/form-data"
          tal:attributes="action request/path"
          tal:define="newfield request/args/newfield | nothing"
          tal:condition="newfield">

        <legend>Custom Schema</legend>

        <b tal:content="view/fields"></b>

        <div tal:repeat="field view/fields" class="formrow">
          <label tal:content="field"></label>
          <input type="hidden" name="newfield" value=""
            tal:attributes="value python:newfield[0]"/>
        </div>

        <b tal:content="request/args/newfield"></b>

        <tal:if condition="python:newfield[0] == 'checkbox'">
          foo
        </tal:if>

      </form>

    </metal:block>

  </body>
</html>
