<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
  <head>
    <title metal:fill-slot="title" i18n:translate="">Edit person info</title>
  </head>

  <body>

    <h1 metal:fill-slot="h1" i18n:translate="">
      Edit person info for 
      <span tal:replace="context/title" i18n:name="title" />
    </h1>

    <metal:block metal:fill-slot="content" tal:define="info view/info">
      <p tal:repeat="facet view/facets">
        <b tal:content="facet/__name__"></b>
      </p>
      <form method="POST" enctype="multipart/form-data"
            tal:attributes="action request/path">
        <div class="error"
            tal:condition="view/error"
            tal:content="view/error" />
        <div class="row"><strong i18n:translate="">Username:</strong>
          <span tal:replace="python:context.__name__">not_doe</span>
        </div>
        <div class="row"><strong i18n:translate="">Title:</strong>
          <span tal:replace="context/title">John, but not Doe</span>
        </div>
        <div class="row" tal:replace="structure view/first_name_widget" />
        <div class="row" tal:replace="structure view/last_name_widget" />
        <div class="row" tal:replace="structure view/dob_widget" />
        <div class="row" tal:replace="structure view/comment_widget" />
        <div class="row">
          <label for="photo" i18n:translate="">Photo</label>
          <input id="photo" type="file" name="photo" />
          <p tal:condition="not:view/photoURL" i18n:translate="">
            No photo currently set
          </p>
          <p tal:condition="view/photoURL">
            <img src="photo.jpg" tal:attributes="src view/photoURL"
                 alt="Photo" i18n:attributes="alt" />
          </p>
        </div>
        <div class="buttons">
        <tal:if tal:condition="view/duplicate_warning">
          <input class="button" type="submit" name="CONFIRM" value="Save anyway"
                 i18n:attributes="value" />
          <input class="button" type="submit" name="CANCEL" value="Cancel"
                 i18n:attributes="value" />
        </tal:if>
        <tal:if tal:condition="not:view/duplicate_warning">
          <input class="button" type="submit" name="SAVE" value="Save"
                 i18n:attributes="value" />
          <input tal:condition="view/photoURL" class="button" type="submit"
                 name="REMOVE_PHOTO" value="Remove photo"
                 i18n:attributes="value" />
        </tal:if>
        </div>
      </form>
    </metal:block>

  </body>
</html>
