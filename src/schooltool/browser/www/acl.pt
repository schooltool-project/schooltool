<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">
    Access control
  </title>
</head>
<body>
  <h1 metal:fill-slot="h1" i18n:translate="">
    Access control
  </h1>
<metal:block metal:fill-slot="content">

<form method="POST" tal:attributes="action request/uri"
      tal:define="status view/update; list view/list">
  <div class="info" tal:condition="status" tal:content="status" />

  <p tal:condition="not:list" i18n:translate="">
    The ACL is empty.
  </p>
  <table class="acl" tal:condition="list">
    <tr>
      <th>&nbsp;</th>
      <th i18n:translate="">User</th>
      <th i18n:translate="">Permission</th>
    </tr>
    <tr tal:repeat="item list">
      <td><input type="checkbox" name="CHECK"
                 tal:attributes="value item/value;
                                 id string:check.${repeat/item/number}" />
      </td>
      <td><label class="plain"
                 tal:omit-tag="item/url"
                 tal:attributes="for string:check.${repeat/item/number}">
            <a tal:omit-tag="not:item/url"
               tal:attributes="href item/url" tal:content="item/title" />
          </label></td>
      <td><label class="plain"
                 tal:attributes="for string:check.${repeat/item/number}"
                 tal:content="item/permission" /></td>
    </tr>
  </table>
  <div class="buttons" tal:condition="list">
    <input type="submit" class="button" name="DELETE"
           value="Revoke permission"
           i18n:attributes="value" />
  </div>
</form>
<form method="POST" tal:attributes="action request/uri">
  <div tal:replace="structure view/user_widget" />
  <div tal:replace="structure view/permission_widget" />
  <div class="buttons">
    <input type="submit" class="button" name="ADD"
           value="Grant permission"
           i18n:attributes="value" />
  </div>
</form>

</metal:block>
</body>
</html>
