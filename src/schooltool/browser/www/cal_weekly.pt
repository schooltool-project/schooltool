<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">Calendar</title>
</head>
<body>
  <h1 metal:fill-slot="h1">
    Calendar for <span tal:replace="context/__parent__/title" />
  </h1>
  <metal:block metal:fill-slot="content">
    <div class="error" tal:content="view/update" />
    <div>
      <a tal:attributes="href
           string:${context/__parent__/@@absolute_url}/calendar_monthly.html"
         >Monthly calendar</a>
    </div>

    <a tal:attributes="href string:${request/path}?date=${view/prevWeek}">
       Previous week</a> |
    <a tal:attributes="href request/path">
       Current week</a> |
    <a tal:attributes="href string:${request/path}?date=${view/nextWeek}">
        Next week</a>

    <div class="day"
         tal:repeat="day view/getWeek">
      <h2 tal:content="python:day.date.strftime('%A, %Y-%m-%d')" />
      <div class="event"
           tal:repeat="event day/events">
         <h3 tal:content="event/title" />
         Duration:
            <span tal:replace="python:event.dtstart.strftime('%H:%M')"
            />&ndash;<span tal:replace="python:(event.dtstart +
                                        event.duration).strftime('%H:%M')" />
      </div>
    </div>

  </metal:block>
</body>
</html>
