<html metal:use-macro="view/macros/calendarpage" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">Calendar</title>
</head>
<body>
  <h1 metal:fill-slot="h1">
    Calendar for <span tal:replace="context/__parent__/title" />
  </h1>
  <metal:block metal:fill-slot="content">
    <h2 tal:content="python:view.cursor.strftime('%B, %Y (week %V)')" />
    <div class="calnav">
    <a tal:attributes="href python:view.calURL('weekly', view.prevWeek())"
       i18n:translate="">Previous week</a>
    <a tal:attributes="href request/path"
       i18n:translate="">Current week</a>
    <a tal:attributes="href python:view.calURL('weekly', view.nextWeek())"
       i18n:translate="">Next week</a>
    <div>
    <div class="calweekly">
      <div class="day"
           tal:repeat="day view/getCurrentWeek">
        <h2>
          <a tal:content="python:day.date.strftime('%A, %Y-%m-%d')"
             tal:attributes="href python:view.calURL('daily', day.date)" />
        </h2>
        <div tal:repeat="event day/events"
             tal:attributes="class python:view.eventClass(event)"
             tal:content="structure python:view.renderEvent(event)"/>
      </div>
    </div>
  </metal:block>
</body>
</html>
