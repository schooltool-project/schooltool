<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">New timetable schema</title>
</head>
<body>
  <h1 metal:fill-slot="h1" i18n:translate="">New timetable schema</h1>
<metal:block metal:fill-slot="content">

<form id="ttwizard" method="POST" tal:attributes="action request/uri"
      tal:define="tt view/ttschema;
                  ncols python:len(tt.day_ids) or 1;
                  rows view/rows;
                  nrows python:len(rows)">

  <table class="timetable"
         tal:define="col_width python:'%d%%' % (100 / ncols);
                     tabindex python:ncols*3">
    <tr><tal:block repeat="day tt/day_ids">
      <th class="day">
        <input class="text" type="text" tal:define="n repeat/day/number"
               tal:attributes="name string:day$n; value day;
                               tabindex python:n*3-2" />
      </th>
      <th class="day" width="1%">
        <input class="button" type="submit" tal:define="n repeat/day/number"
               tal:attributes="name string:COPY_DAY_$n;
                               tabindex python:n*3-1"
               value="C" title="Copy periods from previous day"
               i18n:attributes="value title" />
      </th>
      <th class="day" width="1%">
        <input class="button" type="submit" tal:define="n repeat/day/number"
               tal:attributes="name string:DELETE_DAY_$n;
                               tabindex python:n*3"
               value="X" title="Remove this day"
               i18n:attributes="value title" />
      </th>
    </tal:block></tr>
    <tr tal:repeat="row rows"><tal:block define="row_n repeat/row/number"
                                         repeat="col row">
      <td class="period" tal:define="col_n repeat/col/number" colspan="3"
          tal:attributes="width col_width">
        <input type="text" class="text"
               tal:attributes="name string:day${col_n}.period${row_n};
                               tabindex python:tabindex+(col_n-1)*nrows+row_n;
                               value col/period" />
      </td>
    </tal:block></tr>
  </table>

  <div class="buttons" tal:define="tabindex python:ncols*(nrows+3)">
    <input type="submit" class="button" name="UPDATE" value="Update"
           tal:attributes="tabindex python:tabindex+1"
           i18n:attributes="value" />
    <input type="submit" class="button" name="ADD_DAY" value="Add day"
           tal:attributes="tabindex python:tabindex+2"
           i18n:attributes="value" />
    <input type="submit" class="button" name="ADD_PERIOD" value="Add period"
           tal:attributes="tabindex python:tabindex+3"
           i18n:attributes="value" />
  </div>

</form>

</metal:block>
</body>
</html>
