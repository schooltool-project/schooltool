<html metal:use-macro="view/macros/calendarpage" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">Calendar</title>
</head>
<body>
  <h1 metal:fill-slot="h1" i18n:translate="">
    Calendar for <span tal:replace="context/__parent__/title" i18n:name="title" />
  </h1>
  <metal:block metal:fill-slot="content">
    <h2 tal:content="python:view.cursor.strftime('%Y')" />
    <div class="calnav">
      <a tal:attributes="href python:view.calURL('yearly', view.prevYear())"
         i18n:translate="">Previous year</a>
      <a tal:attributes="href request/path"
         i18n:translate="">Current year</a>
      <a tal:attributes="href python:view.calURL('yearly', view.nextYear())"
         i18n:translate="">Next year</a>
    </div>

    <table class="cal_yearly"
           tal:define="quarters python:view.getYear(view.cursor)">
    <tr tal:repeat="quarter quarters">
      <td class="cal_yearly_month"
          tal:repeat="month quarter">
        <h2>
          <a tal:content="python:view.monthTitle(month[1][0].date)"
             tal:attributes="href python:view.calURL('monthly',
                                                     month[1][0].date)"
             />
         </h2>
        <table class="cal_yearly_month">
          <tr>
            <th class="cal_monthly_weekday"
                  tal:repeat="weekday python:month[0]"
                  tal:content="python:view.dayOfWeek(weekday.date)" />
          </tr>
          <tr tal:repeat="week month">
            <td tal:replace="structure
                      python:view.renderRow(week, month[1][0].date.month)" />
          </tr>
        </table>
      </td>
    </tr>
    </table>
  </metal:block>
</body>
</html>
