<html metal:use-macro="view/macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" tal:content="view/page_title">title</title>
</head>
<body>

<h1 metal:fill-slot="h1" tal:content="view/page_title" />

<metal:block metal:fill-slot="content">

<div tal:condition="view/error" class="error" tal:content="view/error" />
<tal:block condition="not:view/error">

  <p tal:condition="view/tt_event">
    You are trying to alter a timetable event.  An exception for this event
    will be generated in the timetable.
  </p>

  <form method="POST" tal:attributes="action request/path">

    <input tal:condition="request/args/event_id|nothing"
           type="hidden" name="event_id"
           tal:attributes="value view/event_id" />

    <div class="row" tal:replace="structure view/title_widget" />
    <div class="row" tal:replace="structure view/date_widget" />
    <div class="row" tal:replace="structure view/time_widget" />
    <div class="row" tal:replace="structure view/location_widget" />
    <div class="row" tal:replace="structure view/other_location_widget" />
    <div class="row" tal:replace="structure view/duration_widget" />

    <div class="row" tal:replace="structure view/recurrence_widget" />
  <div style="border: 1px solid blue">
    <div class="row" tal:replace="structure view/interval_widget" />
    <div class="row" tal:replace="structure view/recurrence_type_widget" />

    <!-- Range selection -->
    <div class="row">
      <input type="radio" name="range" value="count" id="range_c"
             tal:attributes="checked
                             python:view.range_widget.value == 'count'"/>
      <label for="range_c" class="plain">Repeat</label>
      <input type="text" name="count" size="3"
             tal:attributes="value view/count_widget/value" /> times.
    </div>

    <div class="row">
      <input type="radio" name="range" value="until" id="range_u"
             tal:attributes="checked
                             python:view.range_widget.value == 'until'"/>
      <label for="range_y" class="plain">Repeat until</label>
      <input type="text" name="until"
             tal:attributes="value view/until_widget/value"/>
    </div>

    <div class="row">
      <input type="radio" name="range" value="forever" id="range_f"
             tal:attributes="checked
                             python:view.range_widget.value == 'forever'"/>
      <label for="range_f" class="plain">Repeat forever</label>
    </div>

    <!--
    <div class="row" tal:replace="structure view/count_widget" />
    <div class="row" tal:replace="structure view/until_widget" />

    <div class="row" tal:replace="structure view/weekdays_widget" />
    <div class="row" tal:replace="structure view/monthly_widget" />

    <div class="row" tal:replace="structure view/exceptions_widget" />
    -->
  </div>

    <div class="buttons">
      <input class="button" name="CONFIRM_ADD" type="submit" value="Submit"
             i18n:attributes="value" />
    </div>

  </form>
</tal:block>
</metal:block>
</body>
</html>
