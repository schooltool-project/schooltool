<tal:defs define="update view/update" />
<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">
    Upload SchoolTool timetable as CSV
  </title>
</head>
<body>

<metal:block metal:fill-slot="body">

  <div class="info" tal:condition="view/success">
    <p tal:repeat="msg view/success" tal:content="msg" />
  </div>
  <div class="error" tal:condition="view/errors"
       tal:repeat="err view/errors" tal:content="err" />

  <form method="POST" enctype="multipart/form-data" class="standalone"
        tal:attributes="action request/URL">

    <h3 i18n:translate="">
      Import Timetable
    </h3>

    <p i18n:translate="">
      You can create the CSV files in a spreadsheet and export them in the
      comma separated value format.  The structure of the tables is described
      below.
    </p>

    <p i18n:translate="">
    <strong>timetable.csv</strong> contains the description of the timetable.
    The first row contains the name of the term and the name of the timetable
    schema.  After an empty line, a number of definitions follow for each day
    defined in the timetable schema.</p>

    <p i18n:translate="">
    The definitions are separated with an empty line.  The first line
    contains the day's name.  The next line is a heading for the following
    timetable, so the first cell should be empty and the following ones should
    contain the names of the day periods.
    </p>

    <p i18n:translate="">
    The first cell of each row in the table should contain the name of the
    location where a session takes place. Each of the following cells should
    either be empty or contain a definition of a session: the title of a
    section and the name of a teacher, separated by a pipe symbol (|).
    </p>

    <p i18n:translate="">
    Here is an example of <strong>timetable.csv</strong>:
    </p>

    <pre>
"2004-fall","default"
""
"Day 1"
"","A","B"
"Room 1","Mathematics 1 | Nicola Oakley","Mathematics 2 | Heather Hall"
""
"Day 2"
"","C","D"
"Room 2","Mathematics 2 | Heather Hall","Mathematics 1 | Nicola Oakley"</pre>

    <hr />
    <p i18n:translate="">
      <strong>roster.txt</strong> contains a plain text decription of the
      members of sections.  This file should contain a number of parts
      separated by an empty line.  The first line of each part should be a
      title of an existing section, the following lines should contain
      titles of persons to be added to the section.</p>

      <p i18n:translate="">
      Here is an example of <strong>persons.txt</strong>:
      </p>

    <pre>
Mathematics 1 - Nicola Oakley
Courtney Bisset
Geoffrey Smith
James Cox
James Smith
Jeff Clark
John Ford

Mathematics 2 - Heather Hall
Carol Smith
Deb Price
Denise Batchelor
Jeff Cooper</pre>

    <p i18n:translate="">
      You can only upload one file if you want to.  If any errors occur, they
      will be displayed to and the changes will not be applied.  Note that the
      import could take a while.  In case you are wondering, it is safe to
      submit the same data several times.
    </p>

    <hr />

    <fieldset>
    <legend i18n:translate="">Upload data</legend>
    <div class="row">
      <label for="timetable_csv" i18n:translate="">timetable.csv</label>
      <input id="timetable_csv" type="file" name="timetable.csv" />
    </div>

    <div class="row">
      <label for="roster_txt" i18n:translate="">roster.txt</label>
      <input id="roster_txt" type="file" name="roster.txt" />
    </div>

    <br />

    <div class="row">
      <label for="charset" i18n:translate="">Charset:</label>
      <select id="charset" name="charset">
        <option value="UTF-8" i18n:translate="">Unicode (UTF-8)</option>
        <option value="ISO-8859-1" i18n:translate="">Western (ISO-8859-1)</option>
        <option value="ISO-8859-15" i18n:translate="">Western (ISO-8859-15)</option>
        <option value="Windows-1252" i18n:translate="">Western (Windows-1252)</option>
        <option value="other" i18n:translate="">Other (please specify)</option>
      </select>
    </div>
    <div class="row" i18n:translate="">
        <label for="other_charset" i18n:translate="">Other charset:</label>
        <input id="other_charset" name="other_charset" type="text" />
    </div>
    </fieldset>

  <div class="controls">
    <input name="UPDATE_SUBMIT" class="button-ok" type="submit"
           value="Submit" i18n:attributes="value" />
  </div>

  </form>

</metal:block>
</body>
</html>
