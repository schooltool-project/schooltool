<tal:defs define="update view/update" />
<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" tal:content="context/title" />
</head>
<body>
<metal:block metal:fill-slot="body"
             tal:define="batch view/batch">

<form method="post" tal:attributes="action request/URL" class="standalone">
<h3 i18n:translate="" tal:content="view/title" />
<fieldset tal:define="items view/getSelectedItems">
  <tal:if condition="items">
    <legend i18n:translate="" tal:content="view/current_title" />
    <div tal:repeat="item items/sortby:title">
      <label>
        <input tal:attributes="name string:remove_item.${item/__name__}"
          type="checkbox" />
        <span tal:replace="item/title" />
      </label>
      <div tal:repeat="conflict python:view.getConflictingSections(item)"
           i18n:translate="">
        Conflict:
        <a tal:content="conflict/section/label"
           tal:attributes="href conflict/section/@@absolute_url" />
        (<span tal:replace="conflict/day_id" i18n:name="day_id" />,
         <span tal:replace="conflict/period_id" i18n:name="period_id" />)
      </div>
      <div tal:repeat="conflict python:view.getConflictingEvents(item)"
           i18n:translate="">
        Conflict:
        <a tal:content="conflict/title"
           tal:attributes="href conflict/@@absolute_url" />
      </div>
    </div>
    <div class="controls">
      <input type="submit" class="button-ok" name="REMOVE_ITEMS"
        value="Remove"
        title="Shortcut: Alt-R" accesskey="R"
        i18n:attributes="value; accesskey" />
    </div>
  </tal:if>
  <p tal:condition="not:items" i18n:translate="">
    There are none.
  </p>
</fieldset>
</form>
<form method="post" tal:attributes="action request/URL" class="standalone">
<fieldset>
  <legend i18n:translate="" tal:content="view/available_title" />
  <div class="item_list">
    <tal:block replace="view/batch/render" />
    <input type="text" name="SEARCH"
      tal:attributes="value request/SEARCH|nothing"/>
    <input type="submit" name="SEARCH_BUTTON" value="Find Now"
      i18n:attributes="value"/>
    <input type="submit" name="CLEAR_SEARCH" value="Clear"
      i18n:attributes="value"/>
    <div tal:repeat="item batch" tal:condition="batch">
      <label>
        <input tal:attributes="name string:add_item.${item/__name__}"
               type="checkbox" />
        <span tal:replace="item/title" />
      </label>
      <div tal:repeat="conflict python:view.getConflictingSections(item)"
           i18n:translate="">
        Conflict:
        <a tal:content="conflict/section/label"
           tal:attributes="href conflict/section/@@absolute_url" />
        (<span tal:replace="conflict/day_id" i18n:name="day_id" />,
         <span tal:replace="conflict/period_id" i18n:name="period_id" />)
      </div>
      <div tal:repeat="conflict python:view.getConflictingEvents(item)"
           i18n:translate="">
        Conflict:
        <a tal:content="conflict/title"
           tal:attributes="href conflict/@@absolute_url" />
      </div>
    </div>
    <div class="controls">
      <input type="submit" class="button-ok" name="ADD_ITEMS"
        value="Add" tal:condition="batch"
        title="Shortcut: Alt-A" accesskey="A"
        i18n:attributes="value; accesskey" />
    </div>
    <p tal:condition="not:batch" i18n:translate="">
      There are none to add.
    </p>
  </div>
</fieldset>

<div class="controls">
  <input type="submit" class="button-cancel" name="CANCEL" value="Cancel"
         i18n:attributes="value cancel-button" />
</div>
</form>

</metal:block>
</body>
</html>
