<div>

<form method="POST" enctype="multipart/form-data" class="standalone"
      tal:attributes="action request/URL">

  <p i18n:translate="">
    CSV data <strong>must</strong> include a course
    title,<strong>may</strong> include an optional course
    description, <strong>may</strong> include an optional course
    id, <strong>may</strong> include an optional government id
    and <strong>may</strong> include an optional credits value.
  </p>
  <p i18n:translate="">Example:</p>

<pre class="csv-text" i18n:translate="">
Ancient History, Pre-history through 1000 A.D.
US History,,us-history
World History, 1000 A.D. through the 20th century, history-world
Spanish,,,spanish-gov,5
</pre>

  <p i18n:translate="">
    The above example will create 4 courses titled 'Ancient
    History', 'US History', 'World History' and 'Spanish'.  The
    first and third courses will have the descriptions
    'Pre-history through 1000 A.D.' and '1000 A.D.  through the
    20th century' respectively.  The second and forth courses
    will have no description. The second, third and forth
    courses will have their course ids set to us-history and
    history-world. The forth course will have its government id
    set to spanish-gov and its credits value set to 5.

    If you will upload a CSV with titles or course ids that are
    already present in the database, existing courses will be
    updated.

    Course Ids take precedence when determining which course
    should be updated.
  </p>


  <fieldset name="select-mode">

    <legend><span i18n:translate="">Import source</span></legend>

    <div class="row">
      <div class="widget">
        <span class="option">
          <label>
            <input type="radio"
                   name="csv-input-mode"
                   tal:attributes="checked python:view.mode!='text' and 'checked'"
                   value="upload" />
            <span class="label" i18n:translate="">Upload CSV file</span>
          </label>
        </span>
        <span class="option">
          <label>
            <input type="radio"
                   tal:attributes="checked python:view.mode=='text' and 'checked'"
                   name="csv-input-mode"
                   value="text" />
            <span i18n:translate="">Enter CSV text</span>
          </label>
        </span>
      </div>
    </div>
  </fieldset>

  <script type="text/javascript">
    $(document).ready(function() {
      function update_fieldset(f){
        var mode = $(f).val();
        $('fieldset[name|=csv-mode]').hide().filter('fieldset[name=csv-mode-' + mode + ']').show();
      };
      var mode_field = $('input[name=csv-input-mode]');
      mode_field.change(function(){update_fieldset(this);});
      var active_field = $('input[name=csv-input-mode][checked=checked]');
      update_fieldset(active_field);
    });
  </script>

  <div class="status"
       tal:repeat="error view/errors">
    <div class="summary ui-state-error ui-corner-all">
      <span class="ui-icon ui-icon-alert">icon</span>
      <tal:block content="error">
        [error message]
      </tal:block>
    </div>
  </div>

  <fieldset name="csv-mode-upload">
    <legend><span i18n:translate="">Import CSV</span></legend>
    <div class="row">
      <div class="label">
        <label for="csvfile">
          <span i18n:translate="">Upload CSV file</span>
        </label>
      </div>
      <div class="widget">
        <input id="csvfile" type="file" name="csvfile"/>
      </div>
    </div>

    <div class="row">
      <div class="label">
        <label for="charset">
          <span i18n:translate="">Charset</span>
        </label>
      </div>
      <div class="widget">
        <select name="charset">
          <option value="UTF-8" i18n:translate="">Unicode (UTF-8)</option>
          <option value="ISO-8859-1" i18n:translate="">Western (ISO-8859-1)</option>
          <option value="ISO-8859-15" i18n:translate="">Western (ISO-8859-15)</option>
          <option value="Windows-1252" i18n:translate="">Western (Windows-1252)</option>
          <option value="other" i18n:translate="">Other (please specify)</option>
        </select>
      </div>
    </div>
    <div class="row" i18n:translate="">
      <div class="label">
        <label for="other_charset">
          <span i18n:translate="">Other charset</span>
        </label>
      </div>
      <div class="row">
        <input name="other_charset" type="text" i18n:name="other_charset" />
      </div>
    </div>
  </fieldset>
  <fieldset name="csv-mode-text">
    <legend><span i18n:translate="">Import CSV</span></legend>
    <div class="row">
      <div class="label">
        <label for="csvtext">
          <span i18n:translate="">Enter CSV text</span>
        </label>
      </div>
      <textarea name="csvtext" id="csvtext" cols="50" rows="10"
                tal:content="view/csvtext|nothing"></textarea>
    </div>
  </fieldset>
  <div class="buttons">
    <input name="UPDATE_SUBMIT" class="button-ok" type="submit"
           value="Submit" i18n:attributes="value submit-button" />
  </div>
</form>

<h3><a tal:attributes="href view/nextURL">Done</a></h3>

</div>
