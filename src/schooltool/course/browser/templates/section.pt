<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">
<head>
  <title i18n:translate="">
    Section of
    <tal:loop tal:repeat="course context/courses" i18n:name="course">
      <a tal:replace="structure course/@@title" />
    </tal:loop>
    -- <span i18n:name="section_title" tal:replace="structure context/@@title" />
    for
    <tal:block i18n:name="term" tal:replace="structure view/term/@@title"/> of
    <tal:block i18n:name="schoolyear" tal:replace="structure view/school_year/@@title" />
  </title>
</head>
<body>
  <h1 metal:fill-slot="content-header" i18n:translate="">
    Section of
    <tal:loop tal:repeat="course context/courses" i18n:name="course">
      <a tal:replace="structure course/@@link" />
    </tal:loop>
    -- <span i18n:name="section_title" tal:replace="structure context/@@title" />
    for
    <tal:block i18n:name="term" tal:replace="structure view/term/@@link"/> of
    <tal:block i18n:name="schoolyear" tal:replace="structure view/school_year/@@link" />
  </h1>

<metal:block metal:fill-slot="body">

  <tal:block replace="structure context/@@notes|nothing"/>

  <div id="section-view">

    <a class="modify" href=""
       title="Change the name or description of this section."
       tal:attributes="href string:${context/@@absolute_url}/edit.html"
       i18n:attributes="title"
       i18n:translate="">
       edit info
    </a>

    <p class="description" tal:content="context/description"/>

    <div class="info-block" tal:define="resources context/resources">
      <h3 i18n:translate="">Resources</h3>
      <ul>
        <li tal:repeat="obj resources/sorted_filter_accessible:title">
          <a tal:attributes="href obj/@@absolute_url"
             tal:content="obj/title" />
        </li>
      </ul>
    </div>

    <div class="info-block" tal:define="instructors context/instructors">
      <h3 i18n:translate="">Instructors</h3>
      <ul>
        <li tal:repeat="obj instructors/sorted_filter_accessible:title">
          <a tal:attributes="href obj/@@absolute_url"
             tal:content="obj/title" />
        </li>
      </ul>
      <a class="modify" href=""
         title="Change the instructors for this section."
         tal:attributes="href string:${context/@@absolute_url}/instructors.html"
         i18n:attributes="title"
         i18n:translate="">
         edit instructors
      </a>
    </div>

    <div class="info-block"
         tal:define="groups view/getGroups;
                     persons view/getPersons">
      <h3 i18n:translate="">Students</h3>
      <ul>
        <li class="group" tal:repeat="group groups/sorted_filter_accessible:title">
          <a tal:attributes="href group/@@absolute_url"
             tal:content="group/title" />
          <ul tal:condition="group/members">
            <li class="individual" tal:repeat="person group/members">
              <a tal:attributes="href person/@@absolute_url"
                 tal:content="person/title" />
            </li>
          </ul>
        </li>

        <tal:block tal:replace="structure view/renderPersonTable" />

      </ul>
      <a class="modify" href=""
         title="Change the students in this section individually"
         tal:attributes="href string:${context/@@absolute_url}/learners.html"
         i18n:attributes="title"
         i18n:translate="">
         edit individuals
      </a>
      <a class="modify" href=""
         title="Change the students in this section by groups"
         tal:attributes="href string:${context/@@absolute_url}/learner-groups.html"
         i18n:attributes="title"
         i18n:translate="">
         edit groups
      </a>
    </div>

  </div>
</metal:block>
</body>
</html>
