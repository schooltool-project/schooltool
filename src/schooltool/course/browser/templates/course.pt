<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" tal:content="context/title" />
</head>
<body>
<h1 metal:fill-slot="content-header"
    i18n:translate="">
  <span i18n:name="course" tal:replace="context/title" /> course for
  <tal:block i18n:name="schoolyear"><a tal:attributes="href view/school_year/@@absolute_url"
                                       tal:content="view/school_year/title">School Year</a></tal:block>
</h1>

<metal:block metal:fill-slot="body">

  <tal:block replace="structure context/@@notes|nothing"/>

  <div id="course-view">
    <p class="description" tal:content="context/description"/>

    <div class="sections">

      <div tal:define="sections context/sections">
        <h3 i18n:translate="">Sections</h3>
        <div class="section-list">
          <tal:loop repeat="section sections/sortby:label">
          <tal:if condition="section/can_access:label">

            <tal:comment condition="nothing">
               XXX This should be moved into a macro
            </tal:comment>

            <div class="section"
                 tal:define="instructors section/instructors|nothing;
                             learners section/learners|nothing;
                             calendar section/calendar|nothing">

              <tal:loop repeat="instructor instructors">
                <tal:if condition="instructor/can_access:photo">
                <tal:if condition="instructor/photo">
                  <div class="instructor">
                    <img src="photo" class="person-photo" alt="photo"
                         i18n:attributes="alt"
                         tal:attributes="src string:${instructor/@@absolute_url}/photo" />
                  <br />
                  <a href="" tal:content="instructor/title"
                     tal:attributes="href instructor/@@absolute_url" />
                  </div>
                </tal:if>
                </tal:if>
              </tal:loop>

                <a tal:attributes="href section/@@absolute_url">
                  <span tal:replace="section/label" />
                  (<span tal:replace="section/title" />)
                </a>
              <p>
                  <span tal:replace="section/size" />
                  <span i18n:translate="">students</span>
              </p>

              <p tal:content="section/description" />

            </div>

          </tal:if>
          </tal:loop>

        </div>
      </div>
    </div>
    <form tal:attributes="action request/URL" method="post">
      <div class="controls">
        <input class="button-ok"
               type="submit" name="ADD_SECTION"
               value="New Section"
               i18n:attributes="value"/>
        <label for="term">For term:
        <select id="term" name="term"
                tal:define="terms view/terms/values">
          <option tal:repeat="term terms/sortby:last"
                  tal:attributes="value term/__name__"
                  tal:content="term/title" />
        </select>
        </label>
      </div>
    </form>
  </div>

</metal:block>
</body>
</html>
