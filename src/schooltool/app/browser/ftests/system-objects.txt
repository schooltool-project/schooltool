System objects
==============

SchoolTool has a default user object and some default group objects.  These
objects are special and cannot be deleted.

This functional test makes sure they cannot be deleted via the browser
interface.


Setup
-----

    >>> from zope.testbrowser.testing import Browser
    >>> manager_browser = Browser()
    >>> manager_browser.addHeader('Authorization', 'Basic manager:schooltool')
    >>> manager_browser.handleErrors = False
    >>> manager_browser.open('http://localhost/')
    >>> "SchoolTool" in manager_browser.contents
    True

Let us add a user and a group, so that container views have something besides
the default system objects:

    >>> manager_browser.getLink('Groups').click()
    >>> manager_browser.getLink('New Group').click()
    >>> manager_browser.getControl('Title').value = 'A Group'
    >>> manager_browser.getControl('Add').click()

    >>> from schooltool.app.browser.ftests.setup import addPerson
    >>> addPerson('Stephan Richter', 'srichter', 'foobar')

Test
----

The list of persons should have a disabled checkbox next to the manager user

    >>> manager_browser.open('http://localhost/persons')
    >>> f = open('/tmp/dump.html', 'w')
    >>> f.write(manager_browser.contents)
    >>> f.close()

    >>> for td in analyze.queryHTML('//table[@class="data"]//tr/td', manager_browser.contents):
    ...     print td
    <td>
          <input type="checkbox" name="delete.manager" id="delete.manager" disabled></td>
    <td>
          <a href="http://localhost/persons/manager">SchoolTool Manager</a>
    </td>
    <td>
          <input type="checkbox" name="delete.srichter" id="delete.srichter"></td>
    <td>
          <a href="http://localhost/persons/srichter">Stephan Richter</a>
    </td>

The list of groups should have a disabled checkbox next to the default groups

    >>> manager_browser.open('http://localhost/groups')
    >>> for td in analyze.queryHTML('//table[@class="data"]//tr/td', manager_browser.contents):
    ...     print td
    <td>
          <input type="checkbox" name="delete.a-group" id="delete.a-group"></td>
    <td>
          <a href="http://localhost/groups/a-group">A Group</a>
    </td>
    <td>
          <input type="checkbox" name="delete.clerks" id="delete.clerks" disabled></td>
    <td>
          <a href="http://localhost/groups/clerks">Clerks</a>
    </td>
    <td>
          <input type="checkbox" name="delete.administrators" id="delete.administrators" disabled></td>
    <td>
          <a href="http://localhost/groups/administrators">School Administrators</a>
    </td>
    <td>
          <input type="checkbox" name="delete.manager" id="delete.manager" disabled></td>
    <td>
          <a href="http://localhost/groups/manager">Site Managers</a>
    </td>
    <td>
          <input type="checkbox" name="delete.students" id="delete.students" disabled></td>
    <td>
          <a href="http://localhost/groups/students">Students</a>
    </td>
    <td>
          <input type="checkbox" name="delete.teachers" id="delete.teachers" disabled></td>
    <td>
          <a href="http://localhost/groups/teachers">Teachers</a>
    </td>
