System objects
==============

SchoolTool has a default user object and some default group objects.  These
objects are special and cannot be deleted.

This functional test makes sure they cannot be deleted via the REST interface.


Setup
-----

Let us add a user and a group, so that we have something besides the default
system objects:

    >>> print rest("""
    ... PUT /persons/goose HTTP/1.1
    ... Authorization: Basic manager:schooltool
    ... Content-Type: text/xml
    ...
    ... <object xmlns="http://schooltool.org/ns/model/0.1" title="Goose"/>
    ... """)
    HTTP/1.1 201 Created
    ...

    >>> print rest("""
    ... PUT /groups/birds HTTP/1.1
    ... Authorization: Basic manager:schooltool
    ... Content-Type: text/xml
    ...
    ... <object xmlns="http://schooltool.org/ns/model/0.1" title="Birds"/>
    ... """)
    HTTP/1.1 201 Created
    ...


Test
----

We can't delete system objects:

    >>> print rest(r"""
    ... DELETE /persons/manager HTTP/1.1
    ... Authorization: Basic manager:schooltool""")
    HTTP/1.1 405 Method Not Allowed
    Content-Length: ...
    Content-Type: text/plain; charset=utf-8
    <BLANKLINE>
    Cannot delete system objects.

    >>> print rest(r"""
    ... DELETE /groups/teachers HTTP/1.1
    ... Authorization: Basic manager:schooltool""")
    HTTP/1.1 405 Method Not Allowed
    Content-Length: ...
    Content-Type: text/plain; charset=utf-8
    <BLANKLINE>
    Cannot delete system objects.

but you can delete regular objects

    >>> print rest(r"""
    ... DELETE /persons/goose HTTP/1.1
    ... Authorization: Basic manager:schooltool""")
    HTTP/1.1 200 Ok
    Content-Length: ...
    ...

    >>> print rest(r"""
    ... DELETE /groups/birds HTTP/1.1
    ... Authorization: Basic manager:schooltool""")
    HTTP/1.1 200 Ok
    Content-Length: ...
    ...

