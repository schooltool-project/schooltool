<?xml version="1.0" standalone="no" ?>
<!DOCTYPE document SYSTEM "rml_1_0.dtd" [
  <!ENTITY pound   "&#xA3;">
  <!ENTITY nbsp    "&#160;">
]>
<document
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="context/@@rml_macros/report"
  i18n:domain="schooltool">
  <metal:block fill-slot="page_templates">
    <tal:block content="structure view/use_template/cards" />
  </metal:block>
  <stylesheet>
    <metal:block fill-slot="extra_initialize">
    </metal:block>
    <metal:block fill-slot="stylesheet">
      <paraStyle
          name="normal"
          fontName="Ubuntu_Regular"
          fontSize="10" />
      <paraStyle
          name="card_title"
          alignment="center"
          fontName="Ubuntu_Bold"
          fontSize="14" />
    </metal:block>
  </stylesheet>
  <story metal:fill-slot="story">
    <tal:block repeat="person view/persons">
      <tal:block tal:define="frame python:view.personFrame(repeat)">
        <keepInFrame
            onOverflow="shrink"
            tal:define="frameInfo python:view.frameInfo(frame);"
            tal:attributes="frame string:title_${frame};
                            maxWidth string:${frameInfo/title/maxWidth}cm;
                            maxHeight string:${frameInfo/title/maxHeight}cm">
          <spacer tal:attributes="length string:${view/titleSpacerLength}cm" />
          <para style="card_title" tal:content="view/schoolName" />
        </keepInFrame>
        <keepInFrame
            tal:attributes="frame string:demographics_${frame}">
          <para style="normal" tal:content="person/first_name" />
          <para style="normal" tal:content="person/last_name" />
        </keepInFrame>
        <keepInFrame
            tal:attributes="frame string:photo_${frame}">
        </keepInFrame>
      </tal:block>
      <nextPage tal:condition="python:view.insertBreak(repeat)" />
    </tal:block>
  </story>
</document>
