Basic Person
============

A manager logs in

    >>> from zope.testbrowser.testing import Browser
    >>> manager = Browser()
    >>> manager.addHeader('Authorization', 'Basic manager:schooltool')
    >>> manager.handleErrors = False
    >>> manager.open('http://localhost/')

Create a Basic Person

    >>> manager.getLink('Persons').click()
    >>> manager.getLink('New Person').click()
    >>> manager.getControl('First name').value = "John"
    >>> manager.getControl('Last name').value = "Petterson"
    >>> manager.getControl('Gender').value = ['male']
    >>> manager.getControl('Email').value = 'john@example.com'
    >>> manager.getControl('Phone').value = '111-111-1111'
    >>> manager.getControl('Birth date').value = '1980-01-01'

    >>> manager.getControl('Username').value = "john"
    >>> manager.getControl('Password').value = "pwd"
    >>> manager.getControl('Confirm').value = "pwd"
    >>> manager.getControl('Add').click()

Go to the person list:

    >>> manager.getLink('Persons').click()

Both of our users are in there:

    >>> manager.getLink('John')
    <Link text='John' url='http://localhost/persons/john'>

    >>> manager.getLink('Administrator', index=1)
    <Link text='Administrator' url='http://localhost/persons/manager'>

You can filter the list:

    >>> manager.getControl(name='SEARCH_TITLE').value = "John"
    >>> manager.getControl('Find Now').click()

And now we only have John in there:

    >>> manager.getLink('John')
    <Link text='John' url='http://localhost/persons/john'>

    >>> manager.getLink('Administrator', index=1)
    Traceback (most recent call last):
    ...
    LinkNotFoundError

Now there even are person export views:

    >>> manager.open('http://localhost/persons/@@person_export.xml')
    >>> print manager.contents
    <person_export xmlns:basic="http://schooltool.org/ns/model/0.1/basicperson"
                   xmlns="http://schooltool.org/ns/model/0.1">
      <groups>
        <group>
          <id>manager</id>
          <title>Site Managers</title>
          <description>Manager Group.</description>
        </group>
      </groups>
      <persons>
        <person>
          <username>john</username>
          <title>Petterson John</title>
          <basic:first_name>John</basic:first_name>
          <basic:last_name>Petterson</basic:last_name>
          <basic:gender>male</basic:gender>
          <basic:email>john@example.com</basic:email>
          <basic:phone>111-111-1111</basic:phone>
          <basic:birth_date>1980-01-01</basic:birth_date>
        </person>
        <person>
          <username>manager</username>
          <title>Administrator SchoolTool</title>
          <basic:first_name>SchoolTool</basic:first_name>
          <basic:last_name>Administrator</basic:last_name>
          <groups>
            <group id="manager" />
          </groups>
        </person>
      </persons>
    </person_export>

    >>> manager.open('http://localhost/persons/john/@@person_export.xml')
    >>> print manager.contents
    <person_export xmlns:basic="http://schooltool.org/ns/model/0.1/basicperson"
                   xmlns="http://schooltool.org/ns/model/0.1">
      <persons>
        <person>
          <username>john</username>
          <title>Petterson John</title>
          <basic:first_name>John</basic:first_name>
          <basic:last_name>Petterson</basic:last_name>
          <basic:gender>male</basic:gender>
          <basic:email>john@example.com</basic:email>
          <basic:phone>111-111-1111</basic:phone>
          <basic:birth_date>1980-01-01</basic:birth_date>
        </person>
      </persons>
    </person_export>
