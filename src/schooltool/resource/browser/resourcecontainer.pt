<tal:define define="dummy view/update"/>
<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" tal:content="view/index_title" i18n:translate="">
    Contents
  </title>
</head>
<body>

<h1 metal:fill-slot="content-header"
    tal:content="view/index_title" i18n:translate="">Contents</h1>

<metal:block metal:fill-slot="body">
  <form method="GET" tal:attributes="action view/context/@@absolute_url">

      <!-- Type Searching -->
      <div class="oneline-form">
      <label for="resources.type" title="Type"
             i18n:translate="">Type</label>
      <select id="resources.type" name="resources.type" size="1">
        <tal:block repeat="term python:iter(view.typeVocabulary)">
          <tal:block
                   define="optionValue python:'%s|%s'%(term[0],term[1]);
                           optionContent python:term[1];
                           clickable python:term[2]=='clickable';
                           selected python:request.get('resources.type') == optionValue">
          <tal:if condition="not: selected">
            <option tal:content="optionContent"
                    tal:condition="clickable"
                    tal:attributes="value optionValue">type</option>
            <option tal:content="optionContent"
                    tal:condition="not:clickable"
                    disabled="disabled"
                    class="dropdown-header"
                    tal:attributes="value optionValue">type</option>
          </tal:if>
          <tal:if condition="selected">
            <option tal:content="optionContent"
                    tal:condition="clickable"
                    selected="selected"
                    tal:attributes="value optionValue">type</option>
            <option tal:content="optionContent"
                    tal:condition="not:clickable"
                    disabled="disabled"
                    class="dropdown-header"
                    tal:attributes="value optionValue">type</option>
          </tal:if>
          </tal:block>
        </tal:block>
      </select>
        <input tal:repeat="action view/actions"
               tal:replace="structure action/render" />
      </div>

      <!-- Filtering viewlet by type -->
      <div tal:define="factory view/getResourceUtility"
           tal:condition="factory"
           tal:content="structure view/filter_widget/render"/>

      <div>
        <div tal:condition="view/getResourceUtility">
          <tal:block replace="structure view/renderResourceTable" />
        </div>
      </div>
  </form>
</metal:block>
</body>
</html>
