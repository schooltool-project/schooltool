<tal:defs define="dummy view/update" />
<html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">
<head>
  <title metal:fill-slot="title" i18n:translate="">Edit person</title>
</head>
<body>
  <metal:nothing metal:fill-slot="h1" />
  <metal:block metal:fill-slot="body">

  <form action="." method="POST" tal:attributes="action request/URL" class="standalone"
        enctype="multipart/form-data">
    <h3>
      <span i18n:translate="">Change info for <span tal:replace="context/title" i18n:name="user" /></span>
    </h3>
    <div class="info" tal:condition="view/message" tal:content="view/message" />
    <div class="error" tal:condition="view/error" tal:content="view/error" />

      <fieldset>
        <div class="row" tal:define="widget nocall:view/title_widget">
          <div metal:use-macro="context/@@form_macros/widget_row" />
        </div>
      </fieldset>
      <fieldset>
        <p tal:condition="context/photo">
          <img src="photo" alt="Photo"
               tal:attributes="src string:${context/@@absolute_url}/photo" />
        </p>
        <div class="row" tal:define="widget nocall:view/photo_widget">
          <div metal:use-macro="context/@@form_macros/widget_row" />
        </div>
        <div class="row" tal:define="widget nocall:view/clear_photo_widget">
          <div class="field">
            <input type="text" tal:replace="structure widget" />
            <label tal:attributes="for widget/name"
                   tal:content="widget/label">Label</label>
            <div class="error" tal:define="error widget/error"
                 tal:condition="error" tal:content="structure error">
              Error message.
            </div>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend i18n:translate="">Change password</legend>
        <div class="row" tal:define="widget nocall:view/new_password_widget">
          <div metal:use-macro="context/@@form_macros/widget_row" />
        </div>

        <div class="row" tal:define="widget nocall:view/verify_password_widget">
          <div metal:use-macro="context/@@form_macros/widget_row" />
        </div>
      </fieldset>
    <div class="controls">
      <input class="button-ok" type="submit" name="UPDATE_SUBMIT" value="Apply"
             i18n:attributes="value" />
    </div>
  </form>

  </metal:block>
</body>
</html>
