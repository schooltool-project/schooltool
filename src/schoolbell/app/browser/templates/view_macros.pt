<metal:block define-macro="page" i18n:domain="schooltool">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="layout.css"
          tal:attributes="href context/++resource++layout.css"/>
    <link rel="stylesheet" type="text/css" href="style.css"
          tal:attributes="href context/++resource++style.css"/>
    <script type="text/javascript" href="schoolbell.js"
            tal:attributes="href context/++resource++schoolbell.js">
    </script>
    <metal:block define-slot="title">
      <title i18n:translate="">SchoolBell</title>
    </metal:block>
    <metal:block metal:define-slot="extrahead" />
  </head>
  <body>
    <div id="header">
      <div class="logo">
        <img src="logo.png" alt="SchoolTool" i18n:attributes="alt"
             tal:attributes="src context/++resource++logo.png"/>
        <div metal:define-macro="logged_user" style="float: right">
          <p i18n:translate="">User:
            <span tal:replace="request/principal/title">User</span>
          </p>
        </div>
      </div>
      <div class="tools">
        <table width="100%" metal:define-macro="zmi_tabs">
        <tr>
          <td align="left">
            <span tal:repeat="view context/@@view_get_menu/zmi_views">
              <a tal:attributes="href view/action"
                 tal:content="view/title" i18n:translate="">label</a>
              <tal:block condition="not: repeat/view/end">|</tal:block>
            </span>
          </td>
          <td align="right"
              tal:define="loggedin request/principal/schoolbell:person;
                          url context/schoolbell:app/@@absolute_url"
              tal:on-error="nothing">
            <a tal:condition="not:loggedin"
               tal:attributes="href string:${url}/@@login.html">Log in</a>
            <a tal:condition="loggedin"
               tal:attributes="href string:${url}/@@logout.html">Log out</a>
          </td>
        </tr>
        </table>
      </div>
    </div>
    <div id="columns">
      <metal:block define-slot="column-left">
        <div id="column-left">
          <div tal:replace="structure context/@@schoolbell_navigation" 
               tal:on-error="nothing"/>
          <div class="portlet"
               tal:condition="context/@@view_get_menu/schoolbell_actions">
            <h4>Actions</h4>
            <ul>
              <li tal:repeat="view context/@@view_get_menu/schoolbell_actions">
                <a tal:attributes="href view/action"
                   tal:content="view/title"
                   i18n:translate="" />
              </li>
            </ul>
          </div>
          <metal:block define-slot="column-left-extra"/>
        </div>
      </metal:block>
      <div id="column-center">
        <metal:block define-slot="h1"></metal:block>
        <metal:block define-slot="body"/>
      </div>
    </div>
    <div id="footer" i18n:translate="">
      <p>
        &copy; The Shuttleworth Foundation 2003 - <span>2005</span>:
        Supporting Social Innovation.
      </p>
      <p>
        SchoolTool&trade; is a Trademark of The Shuttleworth Foundation.
      </p>
    </div>
  </body>
</html>
</metal:block>

<metal:block define-macro="calendar-navigation" i18n:domain="schooltool">
  <div id="calendar-navigation-context">
    <table cellpadding="0" cellspacing="0" width="100%">
      <tr>
        <td align="left" width="33%">
          <a id="calendar-navigation-context-previous"
             tal:attributes="href view/prev"
             ><img border="0" src="previous.png" alt="<<"
                   tal:attributes="src context/++resource++previous.png" />
              <span tal:replace="view/prev_title">Previous</span></a>
        </td>
        <td align="center">
          <a id="calendar-navigation-context-current"
             tal:attributes="href request/URL"
             ><img border="0" src="current.png" alt=""
                   tal:attributes="src context/++resource++current.png" />
              <span tal:replace="view/current_title">Current</span></a>
        </td>
        <td align="right" width="33%">
          <a id="calendar-navigation-context-next"
             tal:attributes="href view/next"
             ><span tal:replace="view/next_title">Next</span>
              <img border="0" src="next.png" alt=">>"
                   tal:attributes="src context/++resource++next.png" /></a>
        </td>
      </tr>
    </table>
  </div>
</metal:block>

<metal:block define-macro="calendar-mode" i18n:domain="schooltool">
  <div id="calendar-navigation" style="text-align:center;">
    <a tal:attributes="href string:${context/@@absolute_url}.ics"
       title="Open this calendar in an iCal client."
       i18n:attributes="title"
       i18n:translate="">
      Open in iCal
    </a>
    <a id="calendar-navigation-day"
       tal:attributes="href python:view.calURL('daily')"
       title="View daily calendar"
       i18n:attributes="title"
       i18n:translate=""><img tal:attributes="src context/++resource++day.png"
                              border="0"
                              alt="Daily"/></a>
    <a id="calendar-navigation-week"
       tal:attributes="href python:view.calURL('weekly')"
       title="View weekly calendar"
       i18n:attributes="title"
       i18n:translate=""><img tal:attributes="src context/++resource++week.png"
                              border="0"
                              alt="Weekly"/></a>
    <a id="calendar-navigation-month"
       tal:attributes="href python:view.calURL('monthly')"
       title="View monthly calendar"
       i18n:attributes="title"
       i18n:translate=""><img tal:attributes="src context/++resource++week.png"
                              border="0"
                              alt="Monthly"/></a>
    <a id="calendar-navigation-year"
       tal:attributes="href python:view.calURL('yearly')"
       title="View yearly calendar"
       i18n:attributes="title"
       i18n:translate=""><img tal:attributes="src context/++resource++week.png"
                              border="0"
                              alt="Yearly"/></a>
  </div>
</metal:block>

<metal:block define-macro="calendar-page">
  <html metal:use-macro="view/@@standard_macros/page" i18n:domain="schooltool">

    <metal:block fill-slot="title">
      <title i18n:translate="">Calendar</title>
    </metal:block>

    <metal:block fill-slot="h1">
      <h1 i18n:translate="">
        Calendar for <span tal:replace="context/__parent__/title"
                           i18n:name="title" />
      </h1>
    </metal:block>

    <metal:block fill-slot="body">
        <div metal:use-macro="view/@@standard_macros/calendar-mode"/>
        <div class="calcontent">
          <h2 class="calendar-view-title" tal:content="view/title" />
          <div metal:use-macro="view/@@standard_macros/calendar-navigation" />
          <p metal:define-slot="body"/>
        </div>
    </metal:block>
  </html>
</metal:block>
