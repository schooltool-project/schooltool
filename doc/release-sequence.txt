How to do a release
===================

This is a sequence illustrated by commands for the Milestone 4
release.  The two things you need to decide on are the name of the
branch and the name of the directory in the tarball.  In this case,
the branch is called milestone4 and the directory is schooltool-m4.

If there are any problems on any step, you can delete the branch by
executing the following command:

    svn rm svn+ssh://source.schooltool.org/svn/branches/schooltool/milestone4

and start again.

1. Make sure the SERVER_VERSION in schooltool.main is updated.
   Update the version number in setup.py.

1a. Write a new Changelog entry in debian/changelog.

2. Tag the release:

     svn cp svn+ssh://source.schooltool.org/svn/trunk/schooltool \
            svn+ssh://source.schooltool.org/svn/branches/schooltool/milestone4

3. Checkout the branch:

     svn co svn+ssh://source.schooltool.org/svn/branches/schooltool/milestone4

4. Export the release and tar it up.

     svn export milestone4 schooltool-m4
     tar zcvf schooltool-m4.tar.gz schooltool-m4
     zip -r schooltool-m4.zip schooltool-m4

4a. Optionally, build a Debian package.  You'll need dpkg-dev, fakeroot and
    debhelper packages.

     cd schooltool-m4
     make deb
     cd ..
     mkdir m4
     cp schooltool_0.4-0.1_i386.deb m4
     dpkg-scanpackages m4 /dev/null | gzip > Packages.gz
     rm -r m4

    Upload the Packages.gz together with the Debian package to make it
    installable with apt-get.

4b. Build a win32 package.  See doc/win32installer.txt.

5. Go into the export and make sure it's OK:

     cd schooltool-m4
     make test ftest

   Run the thing and see that it works:

     ./generate-sampleschool.py
     ./schooltool-server.py

   In a new window:

     ./import-sampleschool.py
     ./wxschooltool.py

6. Write the page for the web.  Take screenshots.

7. Upload the page, the screenshots, and the tarball.

   These go in http://schooltool.org/releases/m4

   Update the releases overview page.

8. Upload to SourceForge.

9. Write the announcement to the mailing list.

10. Write the news item for the news box on the website.

11. Maybe write a new front page headline and short announcement.

12. Send announcement, update news and web pages.

13. Post a release to Freshmeat.net.

